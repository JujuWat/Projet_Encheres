<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" th:href="@{/css/style.css}" />
<link rel="stylesheet" th:href="@{/css/tableau.css}" />
</head>
<body>
 <div th:replace="~{fragments/entete::entete}"></div>

<table>
	<!-- entête -->
		<thead>
			<th>Pseudo</th>
			<th>Nom</th>
			<th>Prenom</th>
			<th>Email</th>
			<th>Téléphone</th>
			<th>Adresse</th>
			<th>Crédit</th>
			<th>Changer Rôle</th>
			<th>Supprimer</th>
		<!--  	<th sec:authorize="hasRole('ROLE_ADMIN')">Supprimer</th> -->
		</thead>
	<!-- données -->
		<tr th:each="u : ${utilisateur}">
			
			<td th:text="${u.pseudo}"></td>
			<td th:text="${u.nom}"></td>
			<td th:text="${u.prenom}"></td>
			<td th:text="${u.email}"></td>
			<td th:text="${u.telephone}"></td>
			<td th:text="${u.rue} + ', ' + ${u.code_postal} + ' ' + ${u.ville}" ></td>
			<td th:text="${u.credit}"></td>
			<td>
   				 <a th:href="@{'/toAdmin?id=' + ${u.noUtilisateur}}" 
  					 onclick="return confirm('Êtes-vous sûr de vouloir promouvoir cet utilisateur en Admin ?');">
    				<button>Promouvoir Admin</button>
				</a>
			</td>
			<td><a th:href="@{/supprimerViaAdmin(no_utilisateur=${u.noUtilisateur})}" class="delete-button" onclick="return confirm('Êtes-vous sûr de vouloir supprimer ce profil ? Cette action est irréversible.');">
    			<button type="button" class="btn btn-sup">Supprimer</button>
    		</a></td>
			<!-- <td sec:authorize="hasRole('ROLE_ADMIN')">
   			<a sec:authorize="hasRole('ROLE_ADMIN')" th:href="@{/films/supprimer(id=${f.id})}" class="delete-button">Supprimer</a>
			</td>-->
			
		</tr>
		
	</table>
	 <div th:if="${errorMessage}" class="alert alert-danger">
        <p th:text="${errorMessage}"></p>
    </div>

    <!-- Messages de succès -->
    <div th:if="${successMessage}" class="alert alert-success">
        <p th:text="${successMessage}"></p>
    </div>
</body>
</html>